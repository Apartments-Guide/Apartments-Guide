<html>
<head>
	<link rel="icon" href="https://www.rawshorts.com/freeicons/wp-content/uploads/2017/01/blue_repicthousebase_1484336386-1.png" type="image/x-icon">
	<title> Sign Up Form</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<header> 
		<div class="nav container">
		    <!--logo-->
			<a href="/"class="logo"><i class='bx bx-home'></i>Apartment Guide</a>
			<!--Menu Icon-->
			<input type="checkbox" name="" id="menu">
			<label for="menu"><i class='bx bx-menu' id="menu-icon" ></i></label>
			<!--Nav List-->
			<ul class="navbar">
				<a href="/apartments_view"><li>Apartments</li></a>
			</ul>
		</div>
	</header> 
	<div class= "sign-up-form">
	<h1> Sign Up</h1>
	<form method="post" action="/signup">
	<select name="userType" class="input-box">
		<option value="1">Landlord</option>
		<option value="2">Customer</option>
	</select>
	<input type="email" class="input-box" placeholder="Your Email" name="email" id="email" required>
	<input type="password" class="input-box" placeholder="Your Password" name="password" id="password" required>
	<button type= "submit" class="signup-btn" id='submit'> Sign up</button>
	<hr>
	<p style="color:#1c8adb; font-family: 'Times New Roman'; font-weight: bold;">OR</p>
	<button type="submit'" class="signup-btn"> Login </button>
	
	</form>

	</div>
	<script>
		

//getStarted = document.getElementsByClassName("signupbtn")[0],
email = document.getElementById("email").value;
password = document.getElementById("password").value;

$('#submit').click(function(assetInfo){
	cosnole.log(email, 'pkpkp[[pp[p');
  if (email== '' || password == '') {
    alert('Input can not be left blank');
  }
});
msgEmpty = document.getElementById("msgEmpty"),
input = Array.from(document.getElementsByTagName("input")),
mailExistMsg = document.getElementById("msgExistMail");
mailIncorrectMsg = document.getElementById("msgIncorrectMail");
passMsg = document.getElementById("msgPass");

input.forEach(element => {
    element.addEventListener('change', removeAlert)
});
function removeAlert() {
    msgEmpty.style.display = "none"
    mailExistMsg.style.display = "none"
    mailIncorrectMsg.style.display = "none"
    passMsg.style.display = "none"
}



function IsValidData (email, password){
    IsValidEmail(email)
    isVaalidPassword(password)
    return IsValidName(name) && IsValidEmail(email) && isVaalidPassword(password);
}

function IsValidEmail(email){
    let validRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
    if(email.match(validRegex) != null){
        return true;
    }
    mailIncorrectMsg.style.display = "block"
    return false;
    
}

function isVaalidPassword(password){
    let strongRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/;
    if(password.match(strongRegex) != null){
        return true;
    }
    passMsg.style.display = "block"
    return false;
}


// getStarted.addEventListener('click', signUp);



// async function signUp() {
//     let user = {
//         username:"",
//         email:"",
//         password:"",
//         currency:""
//     };
//     let user_Name = document.getElementById("name").value,
//         user_Email = document.getElementById("email").value,
//         user_Password = document.getElementById("password").value,
//         user_Currency = document.getElementById("currency").value;

//         IsValidData(user_Name,user_Email,user_Password)
//     if(checkEmptyInput(user_Name,user_Email,user_Password) && !IsValidData(user_Name,user_Email,user_Password))
//         return;
//     user.username = user_Name
//     user.email = user_Email
//     user.password = user_Password
//     user.currency = user_Currency

//     try {
//         const response = await fetch("http://127.0.0.1:3000/api/v1/auth/signup", {
//             "method": "post",
//             "headers": {
//                 "Content-Type": "application/json"
//             },
//             "body": JSON.stringify(user)

//         })
//         console.log(response)
//         if(response.status == 409){
//             mailExistMsg.style.display = "block"
//         }
//     } catch (e) {
//         console.log("error", e.message)
//     }
    
// }


//user can show or hide password
function showPassword() {
    const togglePassword = document.getElementsByClassName('hidePsw')[0];
    togglePassword.onclick = function () {
      let password = document.getElementById('password');
      // toggle the type attribute
      const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
      password.setAttribute('type', type);
      // toggle the eye slash icon
      const src= togglePassword.getAttribute('src')==='../assets/img/hideEye.svg'?'../assets/img/showEye.svg':'../assets/img/hideEye.svg';
      togglePassword.setAttribute('src',src);
    };
}
  showPassword();

	</script>
	</body>
 </html>
